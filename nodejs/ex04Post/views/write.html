<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <!-- [POST] localhost:3000/posts -->
    <form action="./posts" method="post" enctype="multipart/form-data">
        <input type="text" name="title" placeholder="게시물 제목"><br>
        <input type="text" name="writer" placeholder="작성자" id="post-frm-writer" readonly><br>
        <textarea name="content" placeholder="게시물 내용"></textarea><br>
        <input type="file" name="img"><br>
        <input type="submit" value="게시물 등록">
    </form>

    <script>
        document.addEventListener('DOMContentLoaded', ()=>{
            fetch('./users')
            .then(res=>res.json())
            .then(user=>{
                console.log('세션 정보', user);
                document.getElementById('post-frm-writer').value = user.id;
            })
            .catch(err=>{
                console.error('세션정보 불러오기 실패', err);
            })
        });
    </script>
</body>
</html>